<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Active Rooms</title>
  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      background: #0f172a;
      color: #e5e7eb;
      padding: 24px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      background: #020617;
      border-radius: 10px;
      overflow: hidden;
    }
    th, td {
      padding: 10px 12px;
      border-bottom: 1px solid #1e293b;
      text-align: left;
      font-size: 14px;
    }
    th {
      text-transform: uppercase;
      font-size: 12px;
      opacity: .7;
    }
  </style>
</head>
<body>

<h1>Active Rooms</h1>

<table>
  <thead>
    <tr>
      <th>Room</th>
      <th>Pet</th>
      <th>Breed</th>
      <th>Owner</th>
      <th>Type</th>
      <th>Start</th>
      <th>End</th>
    </tr>
  </thead>
  <tbody id="rows">
    <tr><td colspan="7">Loading…</td></tr>
  </tbody>
</table>

<script>
fetch("http://localhost:8000/api/rooms")
  .then(r => r.json())
  .then(json => {
    console.log("BOH RAW", json);

    const rowsEl = document.getElementById("rows");

    // combine both arrays — THIS IS KEY
    const records = [
      ...(json.data.checking_in || []),
      ...(json.data.checking_out || [])
    ];

    if (!records.length) {
      rowsEl.innerHTML = `<tr><td colspan="7">No active rooms</td></tr>`;
      return;
    }

    rowsEl.innerHTML = records.map(r => `
      <tr>
        <td>${r.run_name || "—"}</td>
        <td>${r.a_first}</td>
        <td>${r.breed_name}</td>
        <td>${r.o_last}</td>
        <td>${r.type.trim()}</td>
        <td>${formatDate(r.start_date)}</td>
        <td>${formatDate(r.end_date)}</td>
      </tr>
    `).join("");
  });

function formatDate(unix) {
  if (!unix) return "—";
  return new Date(unix * 1000).toLocaleDateString();
}
</script>

</body>
</html>
